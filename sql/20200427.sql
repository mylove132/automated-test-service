ALTER TABLE "jmeter" RENAME COLUMN "preResultId" TO "loopNum";
CREATE TABLE "jmeter_result" ("id" SERIAL NOT NULL, "createDate" TIMESTAMP NOT NULL DEFAULT now(), "jmeterId" integer, CONSTRAINT "PK_deabfe5a1a363149e8efaf1df78" PRIMARY KEY ("id"));
ALTER TABLE "jmeter" DROP COLUMN "loopNum";
ALTER TABLE "jmeter" ADD "loopNum" integer NOT NULL DEFAULT -1;
ALTER TABLE "jmeter_result" ADD CONSTRAINT "FK_d4abd611d465004bdbedc35cd81" FOREIGN KEY ("jmeterId") REFERENCES "jmeter"("id") ON DELETE CASCADE ON UPDATE CASCADE;
COMMENT ON COLUMN "jmeter"."loopNum" IS '循环次数';
ALTER TABLE "jmeter" ALTER COLUMN "loopNum" SET DEFAULT -1;
ALTER TABLE "case" DROP CONSTRAINT "FK_02fd9d506145da4b747d4ec4ca5";
ALTER TABLE "case" DROP CONSTRAINT "FK_6f14c4f8d3ac48202e729524cd4;
ALTER TABLE "case" DROP CONSTRAINT "FK_ace50cf5ad4f83ebf45e718182d;
ALTER TABLE "case" DROP CONSTRAINT "FK_da485311d910dcd2ff151d8a0a6;
ALTER TABLE "case" DROP CONSTRAINT "FK_43b7d44134b7a0fbf9fb572aded;
ALTER TABLE "case" DROP CONSTRAINT "FK_7bedaea7848005f61a37b1fe254;
ALTER TABLE "secheduler" DROP CONSTRAINT "FK_1e74448f8a690f0f38a2d84be0f;
ALTER TABLE "token" DROP CONSTRAINT "FK_f6009d27f6d6e09f704dd4d9c61;
ALTER TABLE "token" DROP CONSTRAINT "FK_abed00d04837320ba2222e0ccf8;
ALTER TABLE "catalog" DROP CONSTRAINT "FK_f18cd600ff3e37b382de2cf3a4e;
ALTER TABLE "history" DROP CONSTRAINT "FK_66f6eb43821666df150f4dcf2e1;
ALTER TABLE "jmeter_result" DROP CONSTRAINT "FK_d4abd611d465004bdbedc35cd81;
ALTER TABLE "operate" DROP CONSTRAINT "FK_f55997d34151be1ea91f27f252d;
ALTER TABLE "exception" DROP CONSTRAINT "FK_4c4c958fc1ab954136d873ea11c;
ALTER TABLE "secheduler_catalogs_catalog" DROP CONSTRAINT "FK_0b156f1316d0acaaf7310fc61b;
ALTER TABLE "secheduler_catalogs_catalog" DROP CONSTRAINT "FK_c8170a590fb4460220c9f2cae30;
ALTER TABLE "secheduler" ADD CONSTRAINT "FK_1e74448f8a690f0f38a2d84be0f" FOREIGN KEY ("envId") REFERENCES "env"("id") ON DELETE SET NULL ON UPDATE CASCADE;
ALTER TABLE "token" ADD CONSTRAINT "FK_abed00d04837320ba2222e0ccf8" FOREIGN KEY ("platformCodeId") REFERENCES "platform_code"("id") ON DELETE SET NULL ON UPDATE CASCADE;
ALTER TABLE "token" ADD CONSTRAINT "FK_f6009d27f6d6e09f704dd4d9c61" FOREIGN KEY ("envId") REFERENCES "env"("id") ON DELETE SET NULL ON UPDATE CASCADE;
ALTER TABLE "catalog" ADD CONSTRAINT "FK_f18cd600ff3e37b382de2cf3a4e" FOREIGN KEY ("platformCodeId") REFERENCES "platform_code"("id") ON DELETE SET NULL ON UPDATE CASCADE;
ALTER TABLE "history" ADD CONSTRAINT "FK_66f6eb43821666df150f4dcf2e1" FOREIGN KEY ("caseId") REFERENCES "case"("id") ON DELETE SET NULL ON UPDATE CASCADE;
ALTER TABLE "jmeter_result" ADD CONSTRAINT "FK_d4abd611d465004bdbedc35cd81" FOREIGN KEY ("jmeterId") REFERENCES "jmeter"("id") ON DELETE SET NULL ON UPDATE CASCADE;
ALTER TABLE "operate" ADD CONSTRAINT "FK_f55997d34151be1ea91f27f252d" FOREIGN KEY ("userId") REFERENCES "user"("id") ON DELETE SET NULL ON UPDATE CASCADE;
ALTER TABLE "exception" ADD CONSTRAINT "FK_4c4c958fc1ab954136d873ea11c" FOREIGN KEY ("userId") REFERENCES "user"("id") ON DELETE SET NULL ON UPDATE CASCADE;
ALTER TABLE "secheduler_catalogs_catalog" ADD CONSTRAINT "FK_c8170a590fb4460220c9f2cae30" FOREIGN KEY ("sechedulerId") REFERENCES "secheduler"("id") ON DELETE SET NULL ON UPDATE NO ACTION;
ALTER TABLE "secheduler_catalogs_catalog" ADD CONSTRAINT "FK_0b156f1316d0acaaf7310fc61b1" FOREIGN KEY ("catalogId") REFERENCES "catalog"("id") ON DELETE SET NULL ON UPDATE NO ACTION;
ALTER TABLE "case" ADD CONSTRAINT "FK_ace50cf5ad4f83ebf45e718182d" FOREIGN KEY ("assertTypeId") REFERENCES "assert_type"("id") ON DELETE SET NULL ON UPDATE CASCADE;
ALTER TABLE "case" ADD CONSTRAINT "FK_da485311d910dcd2ff151d8a0a6" FOREIGN KEY ("assertJudgeId") REFERENCES "assert_judge"("id") ON DELETE SET NULL ON UPDATE CASCADE;
ALTER TABLE "case" ADD CONSTRAINT "FK_6f14c4f8d3ac48202e729524cd4" FOREIGN KEY ("endpointObjectId") REFERENCES "endpoint"("id") ON DELETE SET NULL ON UPDATE CASCADE;
ALTER TABLE "case" ADD CONSTRAINT "FK_7bedaea7848005f61a37b1fe254" FOREIGN KEY ("jmeterId") REFERENCES "jmeter"("id") ON DELETE SET NULL ON UPDATE CASCADE;
ALTER TABLE "case" ADD CONSTRAINT "FK_43b7d44134b7a0fbf9fb572aded" FOREIGN KEY ("tokenId") REFERENCES "token"("id") ON DELETE SET NULL ON UPDATE CASCADE;
ALTER TABLE "case" ADD CONSTRAINT "FK_02fd9d506145da4b747d4ec4ca5" FOREIGN KEY ("catalogId") REFERENCES "catalog"("id") ON DELETE SET NULL ON UPDATE CASCADE;
